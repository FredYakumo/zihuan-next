{
  "nodes": [
    {
      "id": "node_1",
      "name": "QQ机器人适配器",
      "description": "QQ Bot Adapter - receives messages from QQ server",
      "node_type": "bot_adapter",
      "input_ports": [
        {
          "name": "qq_id",
          "data_type": "String",
          "description": "QQ ID to login",
          "required": true
        },
        {
          "name": "bot_server_url",
          "data_type": "String",
          "description": "Bot服务器WebSocket地址",
          "required": true
        },
        {
          "name": "bot_server_token",
          "data_type": "String",
          "description": "Bot服务器连接令牌",
          "required": false
        }
      ],
      "output_ports": [
        {
          "name": "message_event",
          "data_type": "MessageEvent",
          "description": "Raw message event from QQ server",
          "required": true
        },
        {
          "name": "bot_adapter",
          "data_type": "BotAdapterRef",
          "description": "Shared reference to the bot adapter instance",
          "required": true
        }
      ],
      "position": {
        "x": 40.0,
        "y": 60.0
      },
      "size": {
        "width": 320.0,
        "height": 180.0
      },
      "inline_values": {},
      "has_error": false
    },
    {
      "id": "node_2",
      "name": "事件提取message列表",
      "description": "Converts MessageEvent to LLM prompt string",
      "node_type": "extract_message_from_event",
      "input_ports": [
        {
          "name": "message_event",
          "data_type": "MessageEvent",
          "description": "MessageEvent containing message data",
          "required": true
        },
        {
          "name": "bot_adapter",
          "data_type": "BotAdapterRef",
          "description": "BotAdapter reference for context-aware system message",
          "required": true
        },
        {
          "name": "persona",
          "data_type": "String",
          "description": "Optional persona/character description (default: 默认助手)",
          "required": false
        }
      ],
      "output_ports": [
        {
          "name": "messages",
          "data_type": "MessageList",
          "description": "MessageList containing system and user messages",
          "required": true
        }
      ],
      "position": {
        "x": 460.0,
        "y": 60.0
      },
      "size": null,
      "inline_values": {},
      "has_error": false
    },
    {
      "id": "node_3",
      "name": "大语言模型",
      "description": "LLM API Node - processes text with language model",
      "node_type": "llm",
      "input_ports": [
        {
          "name": "prompt",
          "data_type": "String",
          "description": "User prompt to send to LLM",
          "required": true
        },
        {
          "name": "messages",
          "data_type": "Json",
          "description": "Full message history (optional)",
          "required": true
        },
        {
          "name": "max_tokens",
          "data_type": "Integer",
          "description": "Maximum tokens in response (optional)",
          "required": true
        }
      ],
      "output_ports": [
        {
          "name": "response",
          "data_type": "String",
          "description": "LLM response text",
          "required": true
        },
        {
          "name": "full_message",
          "data_type": "Json",
          "description": "Complete message object from LLM",
          "required": true
        },
        {
          "name": "token_usage",
          "data_type": "Json",
          "description": "Token usage information",
          "required": true
        }
      ],
      "position": {
        "x": 460.0,
        "y": 260.0
      },
      "size": null,
      "inline_values": {
        "prompt": "abc"
      },
      "has_error": false
    },
    {
      "id": "node_4",
      "name": "Preview MessageList",
      "description": "Preview MessageList inside the node card with scrollable message items",
      "node_type": "preview_message_list",
      "input_ports": [
        {
          "name": "messages",
          "data_type": "MessageList",
          "description": "MessageList to preview inside the node",
          "required": false
        }
      ],
      "output_ports": [],
      "position": {
        "x": 760.0,
        "y": 60.0
      },
      "size": null,
      "inline_values": {},
      "has_error": false
    }
  ],
  "edges": [
    {
      "from_node_id": "node_1",
      "from_port": "message_event",
      "to_node_id": "node_2",
      "to_port": "message_event"
    },
    {
      "from_node_id": "node_1",
      "from_port": "bot_adapter",
      "to_node_id": "node_2",
      "to_port": "bot_adapter"
    },
    {
      "from_node_id": "node_2",
      "from_port": "messages",
      "to_node_id": "node_3",
      "to_port": "messages"
    },
    {
      "from_node_id": "node_2",
      "from_port": "messages",
      "to_node_id": "node_4",
      "to_port": "messages"
    }
  ]
}